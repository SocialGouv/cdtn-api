include:
  - project: SocialGouv/gitlab-ci-yml
    file: /autodevops.yml
    ref: v17.0.0-beta.28

variables:
  AUTO_DEVOPS_RELEASE_AUTO: "ðŸ”–"
  AUTO_DEVOPS_PRODUCTION_AUTO: "ðŸš€"

Build:
  script:
    - echo "look ma, no build"

Register image:
  extends: .autodevops_register_image
  variables:
    DOCKER_BUILD_ARGS: >-
      --shm-size 1G

Trigger Production:
  extends: .autodevops_trigger_production
  rules:
    - if: "$PRODUCTION"
      when: never
    - if: $CI_COMMIT_TAG && $AUTO_DEVOPS_PRODUCTION_AUTO && $CI_COMMIT_TAG =~ /^v/
      when: on_success
    - if: "$CI_COMMIT_TAG"
      when: manual
